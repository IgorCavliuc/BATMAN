{"ast":null,"code":"import express from 'express';\nimport { MongoClient } from 'mongodb';\nconst uri = 'mongodb+srv://Cavliuc:<password>@cardproduct.3rbu7rh.mongodb.net/?retryWrites=true&w=majority';\nconst app = express();\n\n// Retrieve all users\napp.get('/users', async (req, res) => {\n  const client = new MongoClient(uri, {\n    //@ts-ignore\n    useNewUrlParser: true,\n    useUnifiedTopology: true\n  });\n  try {\n    await client.connect();\n    console.log('Connected to MongoDB');\n    const db = client.db('test');\n    const users = db.collection('users');\n    const result = await users.find({}).toArray();\n    res.send(result);\n  } catch (err) {\n    console.error(err);\n    res.status(500).send('Internal server error');\n  } finally {\n    await client.close();\n    console.log('Disconnected from MongoDB');\n  }\n});\napp.listen(3000, () => {\n  console.log('Server listening on port 3000');\n});","map":{"version":3,"names":["express","MongoClient","uri","app","get","req","res","client","useNewUrlParser","useUnifiedTopology","connect","console","log","db","users","collection","result","find","toArray","send","err","error","status","close","listen"],"sources":["/Users/cavliucigor/Desktop/batman/src/server/index.tsx"],"sourcesContent":["import express from 'express';\nimport { MongoClient, Collection, Cursor, Document } from 'mongodb';\n\ninterface User {\n  name: string;\n  age: number;\n  email: string;\n}\n\nconst uri = 'mongodb+srv://Cavliuc:<password>@cardproduct.3rbu7rh.mongodb.net/?retryWrites=true&w=majority';\n\nconst app = express();\n\n// Retrieve all users\napp.get('/users', async (req, res) => {\n  const client: MongoClient = new MongoClient(uri, {\n    //@ts-ignore\n    useNewUrlParser: true,\n    useUnifiedTopology: true\n  });\n\n  try {\n    await client.connect();\n    console.log('Connected to MongoDB');\n\n    const db = client.db('test');\n    const users: Collection<User> = db.collection('users');\n\n    const result: User[] = await users.find({}).toArray();\n\n    res.send(result);\n  } catch (err) {\n    console.error(err);\n    res.status(500).send('Internal server error');\n  } finally {\n    await client.close();\n    console.log('Disconnected from MongoDB');\n  }\n});\n\napp.listen(3000, () => {\n  console.log('Server listening on port 3000');\n});\n"],"mappings":"AAAA,OAAOA,OAAO,MAAM,SAAS;AAC7B,SAASC,WAAW,QAAsC,SAAS;AAQnE,MAAMC,GAAG,GAAG,+FAA+F;AAE3G,MAAMC,GAAG,GAAGH,OAAO,EAAE;;AAErB;AACAG,GAAG,CAACC,GAAG,CAAC,QAAQ,EAAE,OAAOC,GAAG,EAAEC,GAAG,KAAK;EACpC,MAAMC,MAAmB,GAAG,IAAIN,WAAW,CAACC,GAAG,EAAE;IAC/C;IACAM,eAAe,EAAE,IAAI;IACrBC,kBAAkB,EAAE;EACtB,CAAC,CAAC;EAEF,IAAI;IACF,MAAMF,MAAM,CAACG,OAAO,EAAE;IACtBC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;IAEnC,MAAMC,EAAE,GAAGN,MAAM,CAACM,EAAE,CAAC,MAAM,CAAC;IAC5B,MAAMC,KAAuB,GAAGD,EAAE,CAACE,UAAU,CAAC,OAAO,CAAC;IAEtD,MAAMC,MAAc,GAAG,MAAMF,KAAK,CAACG,IAAI,CAAC,CAAC,CAAC,CAAC,CAACC,OAAO,EAAE;IAErDZ,GAAG,CAACa,IAAI,CAACH,MAAM,CAAC;EAClB,CAAC,CAAC,OAAOI,GAAG,EAAE;IACZT,OAAO,CAACU,KAAK,CAACD,GAAG,CAAC;IAClBd,GAAG,CAACgB,MAAM,CAAC,GAAG,CAAC,CAACH,IAAI,CAAC,uBAAuB,CAAC;EAC/C,CAAC,SAAS;IACR,MAAMZ,MAAM,CAACgB,KAAK,EAAE;IACpBZ,OAAO,CAACC,GAAG,CAAC,2BAA2B,CAAC;EAC1C;AACF,CAAC,CAAC;AAEFT,GAAG,CAACqB,MAAM,CAAC,IAAI,EAAE,MAAM;EACrBb,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;AAC9C,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}